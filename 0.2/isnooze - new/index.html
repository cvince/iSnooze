<!DOCTYPE html>
<html>
<head>
    <title>Navigation Bar</title>
    <!-- the three things that jQuery Mobile needs to work -->
    <link rel="stylesheet" href="jquery.mobile-1.0rc2/jquery.mobile-1.0rc2.css" />
    <link rel="stylesheet" href="main.css" />
	<link href="http://cloud.webtype.com/css/c4d03517-373a-4465-beec-ed29cdebd782.css" rel="stylesheet" type="text/css" />										
	<script src="jquery-1.6.4.js" type="text/javascript"></script>
    <script src="jquery.mobile-1.0rc2/jquery.mobile-1.0rc2.js" type="text/javascript"></script>
	<script src="jquery.timePicker.js" type="text/javascript"></script>
	<link rel="stylesheet" href="timePicker.css" />    
    <script>
	
	//clock
			var checkTime = function(i) {
				if (i < 10) {
					i = "0" + i;
				}
				return i;
			}

			var currentTime = function() {
			
				var today = new Date();

				var h = checkTime(today.getHours());
				var m = checkTime(today.getMinutes());
				var s = checkTime(today.getSeconds());

				$('#currentTime').html(h + ":" + m);

				setTimeout(currentTime, 1000);

			}

			currentTime();	
	</script>
    

   
    
</head>
<body>
    <section id="isnoozealert" data-role="page">
    	<!--INSERT CLOCK DATA HERE-->
        <h4><div id="currentTime">00:00</div></h4>
        <!--END INSERT CLOCK DATA-->
        
        <div class="snooze button">
        	<img src="images/snoozebutton.png">
        </div>
        
        <div class="dismiss button">
        	<img src="images/dismissbutton.png">
        </div>
        
		<div class="app-navigation">
            <a href="#paymentpage"><img src="images/paymentIconWhite.png"></a>
            <a href="#settingspage"><img src="images/settingsIconWhite.png"></a>
            <a href="#alarmpage"><img src="images/clockIconWhite.png"></a>
		</div>
        
        <div id="sound_element"></div>
                
    </section>	

    <!-- This is the first page -->
    <section id="paymentpage" data-role="page">
        <h1>PAYMENT</h1>
        
        <h3>Select Payment Amount:</h3>
        
        <div id="paymentAmount">$</div><input class="dropDown">
        
        <div class=""></div>
        
		<div class="app-navigation">
            <a href="#paymentpage" class="app-active"><img src="images/paymentIcon.png"></a>
            <a href="#settingspage"><img src="images/settingsIcon.png"></a>
            <a href="#alarmpage"><img src="images/clockIcon.png"></a>
		</div>        
    </section>

    <section id="settingspage" data-role="page">
        <h1>SETTINGS</h1>
        
        <h3>Alarm Time:</h3>
                
        
		<div class="app-navigation">
            <a href="#paymentpage"><img src="images/paymentIcon.png"></a>
            <a href="#settingspage" class="app-active"><img src="images/settingsIcon.png"></a>
            <a href="#alarmpage"><img src="images/clockIcon.png"></a>
		</div>   
    </section>

    <section id="alarmpage" data-role="page">
        <h1>ALARM</h1>
        
        <h3>Alarm Time:</h3>        
        
        <input class="dropDown" id="pickTime">

        <h3>Snooze Interval:</h3>        
        
        <input class="dropDown" id="pickInterval">

        
		<div class="app-navigation">
            <a href="#paymentpage"><img src="images/paymentIcon.png"></a>
            <a href="#settingspage"><img src="images/settingsIcon.png"></a>
            <a href="#alarmpage" class="app-active"><img src="images/clockIcon.png"></a>
		</div>   
    </section>    

	<script>
    
    $("#pickTime").change(function(){
        var i = $("#pickTime").val();
        i = i.split(":");
    
        // hh:mm
        
        var today = new Date();
        
        var alarmTime = new Date();
        alarmTime.setHours(i[0]);
        alarmTime.setMinutes(i[1]);	
        alarmTime.setSeconds(0);
        
        var runAlarmTime = alarmTime.getTime() - today.getTime()
        
        setTimeout(makeAlarmGoNow, runAlarmTime);
    
    });
    
    var makeAlarmGoNow = function() {
        
		$.mobile.changePage($("#isnoozealert"),"slide")
		$('#sound_element').html(
		"<embed src='"+"http://upload.wikimedia.org/wikipedia/en/9/98/Rebecca_Black_Friday_Clip.ogg"+"' hidden=true autostart=true loop=false>");
        
    }
    
    var checkTime = function(i) {
        if (i < 10) {
            i = "0" + i;
        }
        return i;
    }
    
    var currentTime = function() {
    
        var today = new Date();
    
        var h = checkTime(today.getHours());
        var m = checkTime(today.getMinutes());
        var s = checkTime(today.getSeconds());
    
        // write logic to display time better
    
        $('#currentTime').html(h + ":" + m + ":" + s);
    
        setTimeout(currentTime, 1000);
    
    }
    
    currentTime();
    
    // $("#pickTime").timePicker();
    
    $("#pickTime").timePicker({
      step: 1});
    
    </script>		
 
</body>
</html>
